(function(){var _getHead;if(window.smvp!=null){return}window.smvp={loadCss:function(url){var head,link;link=document.createElement("link");link.rel="stylesheet";link.type="text/css";link.href=url;link.media="all";head=_getHead();head.appendChild(link);return link},loadJs:function(url){var head,script;script=document.createElement("script");script.src=url;head=_getHead();head.appendChild(script);return script}};_getHead=function(){return document.getElementsByTagName("head")[0]};smvp.loadCss("http://static.smvp.cn/css/smvp.css")}).call(this);(function(){var module;if(smvp.auth!=null){return}smvp.auth=module={CustomerAuth:function(){function _Class(token){this.token=token}return _Class}(),PlayerAuth:function(){function _Class(publisherId,playerId,onSuccess,onError){this.publisherId=publisherId;this.playerId=playerId;this.onSuccess=onSuccess;this.onError=onError}_Class.prototype.start=function(){var expireSeconds,expireTime,token,_ref;smvp.logging.info("Authenticating with publisherId="+this.publisherId+", playerId="+this.playerId+" ...");_ref=this._getTokenCookie(),token=_ref[0],expireTime=_ref[1];if(token===null){return this._getNewToken()}else{expireSeconds=(expireTime-(new Date).getTime())/1e3;return this._onSuccess(token,expireSeconds)}};_Class.prototype._getCookieName=function(){return"smvpToken"+this.playerId};_Class.prototype._getNewToken=function(callback){var args,hash,k,url,v;if(callback==null){callback=null}smvp.logging.debug("Retrieving token from server ...");hash=smvp.util.md5.digest("SMVP_Player|"+this.publisherId+"|"+this.playerId+"|ConSol30fSMvpi5gR3at#Be1i3veM3A!");url="http://a.video.capitalcloud.net/auth/player";args={app:"SMVP_Player",publisher:this.publisherId,player:this.playerId,hash:hash};for(k in args){v=args[k];args[k]=smvp.util.json.stringify(v)}return smvp.util.remoting.get(url,args,function(_this){return function(result){var token;token=result.access_token;_this._setTokenCookie(token);return _this._onSuccess(token,86400)}}(this),function(){return this._onError(result.error,result.message)})};_Class.prototype._getTokenCookie=function(){var expireTime,name,token,value,_ref,_ref1;name=this._getCookieName();value=smvp.util.cookies.get(name);if(value){_ref=value.split("|"),token=_ref[0],expireTime=_ref[1];expireTime=parseInt(expireTime)}else{_ref1=[null,null],token=_ref1[0],expireTime=_ref1[1]}return[token,expireTime]};_Class.prototype._onError=function(code,message){smvp.logging.error("Auth failed: ["+code+"] "+message);if(this.onError!=null){return this.onError(code)}};_Class.prototype._onSuccess=function(token,expireSeconds){smvp.logging.info("Token for player "+this.playerId+" is: "+token+". Expires in "+expireSeconds+" seconds.");this.token=token;setTimeout(function(_this){return function(){return _this._getNewToken()}}(this),(expireSeconds-1e3)*1e3);if(this.onSuccess!=null){return this.onSuccess()}};_Class.prototype._setTokenCookie=function(token){var expireTime,name,value;name=this._getCookieName();expireTime=(new Date).getTime()+86400*1e3;value=""+token+"|"+expireTime;return smvp.util.cookies.set(name,value,86400)};return _Class}()}}).call(this);(function(){var MAX_LINES,logs,_formatTime,_log;if(smvp.logging!=null){return}MAX_LINES=1e4;logs=[];smvp.logging={DEBUG:false,debug:function(msg){return _log("DEBUG",msg)},info:function(msg){return _log("INFO",msg)},warn:function(msg){return _log("WARN",msg)},error:function(msg){return _log("ERROR",msg)}};_log=function(level,msg){var line,time;time=_formatTime(new Date);line=""+time+" ["+level+"] "+msg;logs.push(line);if(logs.length>MAX_LINES){logs=logs.slice(0,MAX_LINES/2)}if(smvp.logging.DEBUG){return console.log(line)}};_formatTime=function(time){var hour,minute,second;hour=("0"+time.getHours()).substring(0,2);minute=("0"+time.getMinutes()).substring(0,2);second=("0"+time.getSeconds()).substring(0,2);return""+hour+":"+minute+":"+second}}).call(this);(function(){if(smvp.sdk!=null){return}smvp.sdk={ApiClient:function(){function _Class(auth){this.auth=auth;this.baseUrl="http://api.video.capitalcloud.net/"}_Class.prototype.api=function(name,args,onSuccess,onError){var k,url,v;if(onSuccess==null){onSuccess=null}if(onError==null){onError=null}smvp.logging.info("Calling api "+name+" ...");url=this.baseUrl+name.replace(/\./g,"/");for(k in args){v=args[k];args[k]=smvp.util.json.stringify(v)}args["token"]=this.auth.token;return smvp.util.remoting.get(url,args,function(result){smvp.logging.debug("Result is "+smvp.util.json.stringify(result));if(onSuccess!=null){return onSuccess(result)}},onError)};return _Class}()}}).call(this);(function(){var __slice=[].slice;if(smvp.util!=null){return}smvp.util={createEvent:function(owner){var handler;handler=null;return function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];if(args.length===1&&typeof args[0]==="function"){handler=args[0];return owner}else{if(handler!=null){return handler.apply(void 0,args)}}}},queryArgs:function(url){var args,index,key,pair,pairs,query,value,_i,_len,_ref;index=url.indexOf("?");if(index===-1){return{}}query=url.substring(index+1);pairs=query.split("&");args={};for(_i=0,_len=pairs.length;_i<_len;_i++){pair=pairs[_i];_ref=pair.split("="),key=_ref[0],value=_ref[1];args[key]=decodeURIComponent(value)}return args}}}).call(this);(function(){var _detectBrowser,_detectPlatform;if(smvp.util.browsers!=null){return}_detectBrowser=function(){var browser,match,ua,version;ua=navigator.userAgent.toLowerCase();match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];browser=match[1]||"";version=match[2]||"0";return browser};_detectPlatform=function(){var android,ipad,iphone;ipad=navigator.userAgent.match(/(iPad)/i);iphone=navigator.userAgent.match(/(iPod|iPhone)/i);android=navigator.userAgent.match(/(Android)/i);if(android){return"android"}else if(ipad||iphone){return"ios"}else{return"windows"}};smvp.util.browsers={platform:_detectPlatform(),browser:_detectBrowser()}}).call(this);(function(){var module;if(smvp.util.cookies!=null){return}smvp.util.cookies=module={get:function(name){var e,n,p,pairs,value,_i,_len;try{pairs=document.cookie.split("; ")}catch(_error){e=_error;return null}value=null;for(_i=0,_len=pairs.length;_i<_len;_i++){p=pairs[_i];n=p.split("=")[0];if(n===name){value=p.substring(p.indexOf("=")+1);value=unescape(value)}}smvp.logging.debug("Get cookie "+name+"="+value+".");return value},remove:function(name){var e;try{document.cookie=""+name+"=; expires=Thu Jan 01 1970 00:00:00 GMT+0800 (CST)";return smvp.logging.debug("Removed cookie "+name+".")}catch(_error){e=_error}},set:function(name,value,expireSeconds){var e,expire;if(expireSeconds==null){expireSeconds=null}value=escape(value);if(expireSeconds!=null){expire=new Date;expire.setSeconds(expire.getSeconds()+expireSeconds);expire="; expires="+expire.toUTCString()}else{expire=""}try{document.cookie=""+name+"="+value+expire;return smvp.logging.debug("Set cookie "+name+"="+value+".")}catch(_error){e=_error}}}}).call(this);(function(){if(typeof smvp.util.json!=="undefined")return;if(typeof window.JSON==="object")smvp.util.json=window.JSON;else{function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}function stringify(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}function parse(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}smvp.util.json={};smvp.util.json.stringify=stringify;smvp.util.json.parse=parse}})();(function(){if(typeof smvp.util.md5!=="undefined")return;var hexcase=0;var b64pad="";function hex_md5(s){return rstr2hex(rstr_md5(str2rstr_utf8(s)))}function b64_md5(s){return rstr2b64(rstr_md5(str2rstr_utf8(s)))}function any_md5(s,e){return rstr2any(rstr_md5(str2rstr_utf8(s)),e)}function hex_hmac_md5(k,d){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)))}function b64_hmac_md5(k,d){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)))}function any_hmac_md5(k,d,e){return rstr2any(rstr_hmac_md5(str2rstr_utf8(k),str2rstr_utf8(d)),e)}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72"}function rstr_md5(s){return binl2rstr(binl_md5(rstr2binl(s),s.length*8))}function rstr_hmac_md5(key,data){var bkey=rstr2binl(key);if(bkey.length>16)bkey=binl_md5(bkey,key.length*8);var ipad=Array(16),opad=Array(16);for(var i=0;i<16;i++){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}var hash=binl_md5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binl_md5(opad.concat(hash),512+128))}function rstr2hex(input){try{hexcase}catch(e){hexcase=0}var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef";var output="";var x;for(var i=0;i<input.length;i++){x=input.charCodeAt(i);output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(x&15)}return output}function rstr2b64(input){try{b64pad}catch(e){b64pad=""}var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var output="";var len=input.length;for(var i=0;i<len;i+=3){var triplet=input.charCodeAt(i)<<16|(i+1<len?input.charCodeAt(i+1)<<8:0)|(i+2<len?input.charCodeAt(i+2):0);for(var j=0;j<4;j++){if(i*8+j*6>input.length*8)output+=b64pad;else output+=tab.charAt(triplet>>>6*(3-j)&63)}}return output}function rstr2any(input,encoding){var divisor=encoding.length;var i,j,q,x,quotient;var dividend=Array(Math.ceil(input.length/2));for(i=0;i<dividend.length;i++){dividend[i]=input.charCodeAt(i*2)<<8|input.charCodeAt(i*2+1)}var full_length=Math.ceil(input.length*8/(Math.log(encoding.length)/Math.log(2)));var remainders=Array(full_length);for(j=0;j<full_length;j++){quotient=Array();x=0;for(i=0;i<dividend.length;i++){x=(x<<16)+dividend[i];q=Math.floor(x/divisor);x-=q*divisor;if(quotient.length>0||q>0)quotient[quotient.length]=q}remainders[j]=x;dividend=quotient}var output="";for(i=remainders.length-1;i>=0;i--)output+=encoding.charAt(remainders[i]);return output}function str2rstr_utf8(input){var output="";var i=-1;var x,y;while(++i<input.length){x=input.charCodeAt(i);y=i+1<input.length?input.charCodeAt(i+1):0;if(55296<=x&&x<=56319&&56320<=y&&y<=57343){x=65536+((x&1023)<<10)+(y&1023);i++}if(x<=127)output+=String.fromCharCode(x);else if(x<=2047)output+=String.fromCharCode(192|x>>>6&31,128|x&63);else if(x<=65535)output+=String.fromCharCode(224|x>>>12&15,128|x>>>6&63,128|x&63);else if(x<=2097151)output+=String.fromCharCode(240|x>>>18&7,128|x>>>12&63,128|x>>>6&63,128|x&63)}return output}function str2rstr_utf16le(input){var output="";for(var i=0;i<input.length;i++)output+=String.fromCharCode(input.charCodeAt(i)&255,input.charCodeAt(i)>>>8&255);return output}function str2rstr_utf16be(input){var output="";for(var i=0;i<input.length;i++)output+=String.fromCharCode(input.charCodeAt(i)>>>8&255,input.charCodeAt(i)&255);return output}function rstr2binl(input){var output=Array(input.length>>2);for(var i=0;i<output.length;i++)output[i]=0;for(var i=0;i<input.length*8;i+=8)output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32;return output}function binl2rstr(input){var output="";for(var i=0;i<input.length*32;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function binl_md5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(var i=0;i<x.length;i+=16){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=md5_ff(a,b,c,d,x[i+0],7,-680876936);d=md5_ff(d,a,b,c,x[i+1],12,-389564586);c=md5_ff(c,d,a,b,x[i+2],17,606105819);b=md5_ff(b,c,d,a,x[i+3],22,-1044525330);a=md5_ff(a,b,c,d,x[i+4],7,-176418897);d=md5_ff(d,a,b,c,x[i+5],12,1200080426);c=md5_ff(c,d,a,b,x[i+6],17,-1473231341);b=md5_ff(b,c,d,a,x[i+7],22,-45705983);a=md5_ff(a,b,c,d,x[i+8],7,1770035416);d=md5_ff(d,a,b,c,x[i+9],12,-1958414417);c=md5_ff(c,d,a,b,x[i+10],17,-42063);b=md5_ff(b,c,d,a,x[i+11],22,-1990404162);a=md5_ff(a,b,c,d,x[i+12],7,1804603682);d=md5_ff(d,a,b,c,x[i+13],12,-40341101);c=md5_ff(c,d,a,b,x[i+14],17,-1502002290);b=md5_ff(b,c,d,a,x[i+15],22,1236535329);a=md5_gg(a,b,c,d,x[i+1],5,-165796510);d=md5_gg(d,a,b,c,x[i+6],9,-1069501632);c=md5_gg(c,d,a,b,x[i+11],14,643717713);b=md5_gg(b,c,d,a,x[i+0],20,-373897302);a=md5_gg(a,b,c,d,x[i+5],5,-701558691);d=md5_gg(d,a,b,c,x[i+10],9,38016083);c=md5_gg(c,d,a,b,x[i+15],14,-660478335);b=md5_gg(b,c,d,a,x[i+4],20,-405537848);a=md5_gg(a,b,c,d,x[i+9],5,568446438);d=md5_gg(d,a,b,c,x[i+14],9,-1019803690);c=md5_gg(c,d,a,b,x[i+3],14,-187363961);b=md5_gg(b,c,d,a,x[i+8],20,1163531501);a=md5_gg(a,b,c,d,x[i+13],5,-1444681467);d=md5_gg(d,a,b,c,x[i+2],9,-51403784);c=md5_gg(c,d,a,b,x[i+7],14,1735328473);b=md5_gg(b,c,d,a,x[i+12],20,-1926607734);a=md5_hh(a,b,c,d,x[i+5],4,-378558);d=md5_hh(d,a,b,c,x[i+8],11,-2022574463);c=md5_hh(c,d,a,b,x[i+11],16,1839030562);b=md5_hh(b,c,d,a,x[i+14],23,-35309556);a=md5_hh(a,b,c,d,x[i+1],4,-1530992060);d=md5_hh(d,a,b,c,x[i+4],11,1272893353);c=md5_hh(c,d,a,b,x[i+7],16,-155497632);b=md5_hh(b,c,d,a,x[i+10],23,-1094730640);a=md5_hh(a,b,c,d,x[i+13],4,681279174);d=md5_hh(d,a,b,c,x[i+0],11,-358537222);c=md5_hh(c,d,a,b,x[i+3],16,-722521979);b=md5_hh(b,c,d,a,x[i+6],23,76029189);a=md5_hh(a,b,c,d,x[i+9],4,-640364487);d=md5_hh(d,a,b,c,x[i+12],11,-421815835);c=md5_hh(c,d,a,b,x[i+15],16,530742520);b=md5_hh(b,c,d,a,x[i+2],23,-995338651);a=md5_ii(a,b,c,d,x[i+0],6,-198630844);d=md5_ii(d,a,b,c,x[i+7],10,1126891415);c=md5_ii(c,d,a,b,x[i+14],15,-1416354905);b=md5_ii(b,c,d,a,x[i+5],21,-57434055);a=md5_ii(a,b,c,d,x[i+12],6,1700485571);d=md5_ii(d,a,b,c,x[i+3],10,-1894986606);c=md5_ii(c,d,a,b,x[i+10],15,-1051523);b=md5_ii(b,c,d,a,x[i+1],21,-2054922799);a=md5_ii(a,b,c,d,x[i+8],6,1873313359);d=md5_ii(d,a,b,c,x[i+15],10,-30611744);c=md5_ii(c,d,a,b,x[i+6],15,-1560198380);b=md5_ii(b,c,d,a,x[i+13],21,1309151649);a=md5_ii(a,b,c,d,x[i+4],6,-145523070);d=md5_ii(d,a,b,c,x[i+11],10,-1120210379);c=md5_ii(c,d,a,b,x[i+2],15,718787259);b=md5_ii(b,c,d,a,x[i+9],21,-343485551);a=safe_add(a,olda);b=safe_add(b,oldb);c=safe_add(c,oldc);d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}smvp.util.md5={digest:hex_md5}})();if(typeof smvp.util.swfobject=="undefined"){smvp.util.swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",ON_READY_STATE_CHANGE="onreadystatechange",win=window,doc=document,nav=navigator,plugin=false,domLoadFnArr=[main],regObjArr=[],objIdArr=[],listenersArr=[],storedAltContent,storedAltContentId,storedCallbackFn,storedCallbackObj,isDomLoaded=false,isExpressInstallActive=false,dynamicStylesheet,dynamicStylesheetMedia,autoHideShow=true,ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=!+"1",playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){plugin=true;ie=false;d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof win.ActiveXObject!=UNDEF){try{var a=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(a){d=a.GetVariable("$version");if(d){ie=true;d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}}catch(e){}}return{w3:w3cdom,pv:playerVersion,wk:webkit,ie:ie,win:windows,mac:mac}}(),onDomLoad=function(){if(!ua.w3){return}if(typeof doc.readyState!=UNDEF&&doc.readyState=="complete"||typeof doc.readyState==UNDEF&&(doc.getElementsByTagName("body")[0]||doc.body)){callDomLoadFunctions()}if(!isDomLoaded){if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,false)}if(ua.ie&&ua.win){doc.attachEvent(ON_READY_STATE_CHANGE,function(){if(doc.readyState=="complete"){doc.detachEvent(ON_READY_STATE_CHANGE,arguments.callee);callDomLoadFunctions()}});if(win==top){(function(){if(isDomLoaded){return}try{doc.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})()}}if(ua.wk){(function(){if(isDomLoaded){return}if(!/loaded|complete/.test(doc.readyState)){setTimeout(arguments.callee,0);return}callDomLoadFunctions()})()}addLoadEvent(callDomLoadFunctions)}}();function callDomLoadFunctions(){if(isDomLoaded){return}try{var t=doc.getElementsByTagName("body")[0].appendChild(createElement("span"));t.parentNode.removeChild(t)}catch(e){return}isDomLoaded=true;var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}function main(){if(plugin){testPlayerVersion()}else{matchVersions()}}function testPlayerVersion(){var b=doc.getElementsByTagName("body")[0];var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);var t=b.appendChild(o);if(t){var counter=0;(function(){if(typeof t.GetVariable!=UNDEF){var d=t.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");ua.pv=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}else if(counter<10){counter++;setTimeout(arguments.callee,10);return}b.removeChild(o);t=null;matchVersions()})()}else{matchVersions()}}function matchVersions(){var rl=regObjArr.length;if(rl>0){for(var i=0;i<rl;i++){var id=regObjArr[i].id;var cb=regObjArr[i].callbackFn;var cbObj={success:false,id:id};if(ua.pv[0]>0){var obj=getElementById(id);if(obj){if(hasPlayerVersion(regObjArr[i].swfVersion)&&!(ua.wk&&ua.wk<312)){setVisibility(id,true);if(cb){cbObj.success=true;cbObj.ref=getObjectById(id);cb(cbObj)}}else if(regObjArr[i].expressInstall&&canExpressInstall()){var att={};att.data=regObjArr[i].expressInstall;att.width=obj.getAttribute("width")||"0";att.height=obj.getAttribute("height")||"0";if(obj.getAttribute("class")){att.styleclass=obj.getAttribute("class")}if(obj.getAttribute("align")){att.align=obj.getAttribute("align")}var par={};var p=obj.getElementsByTagName("param");var pl=p.length;for(var j=0;j<pl;j++){if(p[j].getAttribute("name").toLowerCase()!="movie"){par[p[j].getAttribute("name")]=p[j].getAttribute("value")}}showExpressInstall(att,par,id,cb)}else{displayAltContent(obj);if(cb){cb(cbObj)}}}}else{setVisibility(id,true);if(cb){var o=getObjectById(id);if(o&&typeof o.SetVariable!=UNDEF){cbObj.success=true;cbObj.ref=o}cb(cbObj)}}}}}function getObjectById(objectIdStr){var r=null;var o=getElementById(objectIdStr);if(o&&o.nodeName=="OBJECT"){if(typeof o.SetVariable!=UNDEF){r=o}else{var n=o.getElementsByTagName(OBJECT)[0];if(n){r=n}}}return r}function canExpressInstall(){return!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)&&!(ua.wk&&ua.wk<312)}function showExpressInstall(att,par,replaceElemIdStr,callbackFn){isExpressInstallActive=true;storedCallbackFn=callbackFn||null;storedCallbackObj={success:false,id:replaceElemIdStr};var obj=getElementById(replaceElemIdStr);if(obj){if(obj.nodeName=="OBJECT"){storedAltContent=abstractAltContent(obj);storedAltContentId=null}else{storedAltContent=obj;storedAltContentId=replaceElemIdStr}att.id=EXPRESS_INSTALL_ID;if(typeof att.width==UNDEF||!/%$/.test(att.width)&&parseInt(att.width,10)<310){att.width="310"}if(typeof att.height==UNDEF||!/%$/.test(att.height)&&parseInt(att.height,10)<137){att.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",fv="MMredirectURL="+win.location.toString().replace(/&/g,"%26")+"&MMplayerType="+pt+"&MMdoctitle="+doc.title;if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+fv}else{par.flashvars=fv}if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceElemIdStr+="SWFObjectNew";newObj.setAttribute("id",replaceElemIdStr);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";(function(){if(obj.readyState==4){obj.parentNode.removeChild(obj)}else{setTimeout(arguments.callee,10)}})()}createSWF(att,par,replaceElemIdStr)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";(function(){if(obj.readyState==4){obj.parentNode.removeChild(obj)}else{setTimeout(arguments.callee,10)}})()}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(ua.wk&&ua.wk<312){return r}if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&obj.nodeName=="OBJECT"){if(ua.ie&&ua.win){obj.style.display="none";(function(){if(obj.readyState==4){removeObjectInIE(id)}else{setTimeout(arguments.callee,10)}})()}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return pv[0]>v[0]||pv[0]==v[0]&&pv[1]>v[1]||pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]?true:false}function createCSS(sel,decl,media,newStyle){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0];if(!h){return}var m=media&&typeof media=="string"?media:"screen";if(newStyle){dynamicStylesheet=null;dynamicStylesheetMedia=null}if(!dynamicStylesheet||dynamicStylesheetMedia!=m){var s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media",m);dynamicStylesheet=h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){dynamicStylesheet=doc.styleSheets[doc.styleSheets.length-1]}dynamicStylesheetMedia=m}if(ua.ie&&ua.win){if(dynamicStylesheet&&typeof dynamicStylesheet.addRule==OBJECT){dynamicStylesheet.addRule(sel,decl)}}else{if(dynamicStylesheet&&typeof doc.createTextNode!=UNDEF){dynamicStylesheet.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}}}function setVisibility(id,isVisible){if(!autoHideShow){return}var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars&&typeof encodeURIComponent!=UNDEF?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in smvp.util.swfobject){smvp.util.swfobject[l]=null}smvp.util.swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr,callbackFn){if(ua.w3&&objectIdStr&&swfVersionStr){var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr;regObj.callbackFn=callbackFn;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)}else if(callbackFn){callbackFn({success:false,id:objectIdStr})}},getObjectById:function(objectIdStr){if(ua.w3){return getObjectById(objectIdStr)}},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj,callbackFn){var callbackObj={success:false,id:replaceElemIdStr,responseType:1,playerWidth:widthStr,playerHeight:heightStr};if(ua.w3&&!(ua.wk&&ua.wk<312)&&swfUrlStr&&replaceElemIdStr&&widthStr&&heightStr&&swfVersionStr){setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){widthStr+="";heightStr+="";var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){att[i]=attObj[i]}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){par[j]=parObj[j]}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}if(hasPlayerVersion(swfVersionStr)){var obj=createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}callbackObj.success=true;callbackObj.ref=obj}else if(xiSwfUrlStr&&canExpressInstall()){att.data=xiSwfUrlStr;showExpressInstall(att,par,replaceElemIdStr,callbackFn);return}else{setVisibility(replaceElemIdStr,true)}if(callbackFn){callbackFn(callbackObj)}})}else if(callbackFn){callbackFn(callbackObj)}},switchOffAutoHideShow:function(){autoHideShow=false},ua:ua,getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},showExpressInstall:function(att,par,replaceElemIdStr,callbackFn){if(ua.w3&&canExpressInstall()){showExpressInstall(att,par,replaceElemIdStr,callbackFn)}},removeSWF:function(objElemIdStr){if(ua.w3){removeSWF(objElemIdStr)}},createCSS:function(selStr,declStr,mediaStr,newStyleBoolean){if(ua.w3){createCSS(selStr,declStr,mediaStr,newStyleBoolean)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(q){if(/\?/.test(q)){q=q.split("?")[1]}if(param==null){return urlEncodeIfNecessary(q)}var pairs=q.split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring(pairs[i].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj&&storedAltContent){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}if(storedCallbackFn){storedCallbackFn(storedCallbackObj)}}isExpressInstallActive=false;
}}}}()}(function(){var module,_impl,__slice=[].slice;if(smvp.util.remoting!=null){return}smvp.util.remoting=module={get:function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return _impl().get.apply(null,args)},_queryString:function(args){var k,ret,sep,v;if(args.length===0){return null}ret="";sep="";for(k in args){v=args[k];ret+=""+sep+k+"="+v;sep="&"}return ret},_urlForGet:function(url,args){if(args.length===0){return url}return url+"?"+module._queryString(args)}};_impl=function(){var _ref;if((_ref=smvp.util.browsers.browser)==="chrome"||_ref==="mozilla"){return smvp.util.remoting.cors}else{return smvp.util.remoting.jsonp}}}).call(this);(function(){if(smvp.util.remoting.cors!=null){return}smvp.util.remoting.cors={get:function(url,args,onSuccess,onError){var request;if(onError==null){onError=null}url=smvp.util.remoting._urlForGet(url,args);request=new XMLHttpRequest;request.onreadystatechange=function(){var result;if(request.readyState===4){result=smvp.util.json.parse(request.responseText);if(request.status===200){if("error"in result){if(onError!=null){return onError(result)}}else{return onSuccess(result)}}else{if(onError!=null){return onError(result)}}}};request.open("POST",url);return request.send()}}}).call(this);(function(){var callbacks,module,_createCallback,_createScript,_randId;if(smvp.util.remoting.jsonp!=null){return}callbacks={};smvp.util.remoting.jsonp=module={get:function(url,args,onSuccess,onError){var onSuccessName;if(onError==null){onError=null}url=smvp.util.remoting._urlForGet(url,args);onSuccessName=_createCallback(onSuccess,onError);return _createScript(url,onSuccessName,onError)}};_createCallback=function(onSuccess,onError){var onSuccessName;onSuccessName="_callback"+_randId();module[onSuccessName]=function(result){if("error"in result){smvp.logging.error("JSONP failed: ["+result.error+"] "+result.message+".");if(onError!=null){onError(result)}}else{onSuccess(result)}return delete module[onSuccessName]};return onSuccessName};_createScript=function(url,onSuccessName,onError){var script,sep;if(onError==null){onError=null}sep=url.indexOf("?")===-1?"?":"&";url+=sep+("callback=smvp.util.remoting.jsonp."+onSuccessName);script=smvp.loadJs(url);return setTimeout(function(){script.parentNode.removeChild(script);if(module[onSuccessName]!=null){delete module[onSuccessName];if(onError!=null){return onError()}}},1e4)};_randId=function(){return Math.floor(Math.random()*1e8)}}).call(this);(function(){var module,startsWith;if(smvp.players!=null){return}smvp.loadCss("http://static.smvp.cn/css/smvp-player.css");smvp.players=module={instances:{},Player:function(){function _Class(script){var height,indexH,indexW,width;this.script=script;this.args=smvp.util.queryArgs(this.script.src);indexW=this.args.width.indexOf("|");if(indexW===-1){this.flash_width=this.args.width+"px";this.html5_width=this.args.width}else{width=this.args.width.split("|");this.flash_width=width[1];this.html5_width=width[0]}indexH=this.args.height.indexOf("|");if(indexH===-1){this.flash_height=this.args.height+"px";this.html5_height=this.args.height}else{height=this.args.height.split("|");this.flash_height=height[1];this.html5_height=height[0]}this.pendingReadies=[];smvp.players.instances[this._getId()]=this}_Class.prototype.build=function(){smvp.logging.info("Building player "+this._getId()+" ...");this._buildContainer();return this._buildPlayer()};_Class.prototype._buildContainer=function(){this.container=document.createElement("div");this.container.id="smvpPlayer"+this._getId();this.container.className+=" smvp-container smvp-player";return this.script.parentNode.insertBefore(this.container,this.script)};_Class.prototype._buildPlayer=function(){throw new Error("Not implemented.")};_Class.prototype._getId=function(){return this.args.videoId};return _Class}(),get:function(id){var player,_ref;if(id==null){id=null}if(id!=null){return module.instances[id]}_ref=module.instances;for(id in _ref){player=_ref[id];return player}},scan:function(){var platform,script,_i,_len,_ref,_results;_ref=document.getElementsByTagName("script");_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){script=_ref[_i];if(!(startsWith(script.src,"http://pub.video.capitalcloud.net/publishing/smvp.js")||startsWith(script.src,"http://pub.pan.sohu.net/publishing/smvp.js")||startsWith(script.src,"http://pub.smvp.cn/publishing/smvp.js"))){continue}if(script.loaded){continue}platform=smvp.util.browsers.platform;if(platform==="windows"){if(script.src.indexOf("videoId")!==-1){new smvp.players.SingleFlashPlayer(script).build()}else if(script.src.indexOf("playlistId")!==-1){new smvp.players.ListFlashPlayer(script).build()}}else if(platform==="android"){new smvp.players.AndroidPlayer(script).build()}else if(platform==="ios"){new smvp.players.IosPlayer(script).build()}_results.push(script.loaded="true")}return _results}};startsWith=function(s,prefix){return s.substring(0,prefix.length)===prefix}}).call(this);(function(){var _capitalize,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__slice=[].slice;if(smvp.players.FlashPlayer==null){smvp.players.FlashPlayer=function(_super){__extends(_Class,_super);function _Class(){return _Class.__super__.constructor.apply(this,arguments)}_Class.prototype.HOOD_ID="smvpPlayerLightOnBackground";_Class.prototype.ZERO_PX="0px";_Class.prototype._buildPlayer=function(){var flashVars,params,swfUrl;flashVars=this._buildFlashVars();params={wmode:"opaque",quality:"high",allowscriptaccess:"always",allowfullscreen:"true"};swfUrl=this._calcSwfUrl();return smvp.util.swfobject.embedSWF(swfUrl,this.container.id,this.flash_width,this.flash_height,"11.1.0",void 0,flashVars,params,void 0,function(_this){return function(result){if(result.success){smvp.logging.info("Loaded swf for "+_this._getId()+".");_this.swf=result.ref;return _this._createDiv()}else{document.getElementById(result.id).style.visibility="visible";if(result.responseType===2){document.getElementById(result.id).outerHTML='<div style="margin-left:auto;margin-right:auto;line-height:'+result.playerHeight+";background-color:#000000;width:"+result.playerWidth+";height:"+result.playerHeight+';"><span style="font-size:18px;color:#ffffff">您的flash插件版本过低,请点击<a href="http://www.adobe.com/go/getflash" target="_blank">这里</a>更新</span></div>'}else{document.getElementById(result.id).outerHTML='<div style="margin-left:auto;margin-right:auto;line-height:'+result.playerHeight+";background-color:#000000;width:"+result.playerWidth+";height:"+result.playerHeight+';"><span style="font-size:18px;color:#ffffff">您还没有安装flash插件,请点击<a href="http://www.adobe.com/go/getflash" target="_blank">这里</a>安装</span></div>'}smvp.logging.error("Failed to load swf.");return _this._showError("Failed to load swf.")}}}(this))};_Class.prototype._showError=function(msg){};_Class.prototype._createDiv=function(){var lightDiv;lightDiv=document.createElement("div");lightDiv.id=this.HOOD_ID;lightDiv.className="smvp-player-container";return document.body.appendChild(lightDiv)};return _Class}(smvp.players.Player)}if(smvp.players.SingleFlashPlayer==null){smvp.players.SingleFlashPlayer=function(_super){__extends(_Class,_super);function _Class(script){_Class.__super__.constructor.call(this,script);this._createEvent("start");this._createEvent("play");this._createEvent("pause");this._createEvent("complete");this._createEvent("error");this._createEvent("progress");this._createEvent("seek")}_Class.prototype.fireReady=function(){var f,_i,_len,_ref;_ref=this.pendingReadies;for(_i=0,_len=_ref.length;_i<_len;_i++){f=_ref[_i];f()}return this.pendingReadies=[]};_Class.prototype.ready=function(func){if(this.swf){return func()}else{return this.pendingReadies.push(func)}};_Class.prototype.setMarquee=function(options){this.swf.sendNotification("setMarquee",options);return this};_Class.prototype.fireStart=function(){if(this.startCallback!=null){return this.startCallback()}};_Class.prototype.firePlay=function(){if(this.playCallback!=null){return this.playCallback()}};_Class.prototype.firePause=function(){if(this.pauseCallback!=null){return this.pauseCallback()}};_Class.prototype.fireSeek=function(e){if(this.seekCallback!=null){return this.seekCallback(e)}};_Class.prototype.fireComplete=function(){if(this.completeCallback!=null){return this.completeCallback()}};_Class.prototype.fireError=function(){if(this.errorCallback!=null){return this.errorCallback()}};_Class.prototype.fireProgress=function(e){if(this.progressCallback!=null){return this.progressCallback(e)}};_Class.prototype.toggleLight=function(){var h;h=document.getElementById(this.HOOD_ID).style.height;if(h&&h!==this.ZERO_PX){document.getElementById(this.HOOD_ID).style.height=this.ZERO_PX;return document.getElementById(this.HOOD_ID).style.display="none"}else{this.swf.className="smvp-player-on-light";document.getElementById(this.HOOD_ID).style.height="100%";document.getElementById(this.HOOD_ID).style.position="absolute";document.getElementById(this.HOOD_ID).style.zIndex=-1;return document.getElementById(this.HOOD_ID).style.display="block"}};_Class.prototype._buildFlashVars=function(){return{pubId:this.args.publisherId,playerId:this.args.playerId,entryId:this.args.videoId}};_Class.prototype._calcSwfUrl=function(){return"http://static.smvp.cn/flash/player/ssplayer.swf?publisher_id="+this.args.publisherId};_Class.prototype._createEvent=function(name){return this[name]=function(_this){return function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];if(args.length===1&&typeof args[0]==="function"){_this["fire"+_capitalize(name)]=args[0]}else{_this.swf.sendNotification("do"+_capitalize(name),args)}return _this}}(this)};return _Class}(smvp.players.FlashPlayer);_capitalize=function(s){return s.substring(0,1).toUpperCase()+s.substring(1)}}if(smvp.players.ListFlashPlayer==null){smvp.players.ListFlashPlayer=function(_super){__extends(_Class,_super);function _Class(){return _Class.__super__.constructor.apply(this,arguments)}_Class.prototype._buildFlashVars=function(){return{pubId:this.args.publisherId,playerId:this.args.playerId,playlistId:this.args.playlistId}};_Class.prototype._calcSwfUrl=function(){return"http://static.smvp.cn/flash/player/ssplayer.swf?publisher_id="+this.args.publisherId};_Class.prototype._getId=function(){return this.args.playlistId};return _Class}(smvp.players.FlashPlayer)}if(smvp.util.browsers.platform==="windows"){smvp.players.scan()}}).call(this);(function(){var _ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};if(smvp.players.Html5Player==null){smvp.players.Html5Player=function(_super){__extends(_Class,_super);function _Class(){return _Class.__super__.constructor.apply(this,arguments)}_Class.prototype._buildPlayer=function(){var auth;auth=new smvp.auth.PlayerAuth(this.args.publisherId,this.args.playerId,function(_this){return function(){return _this._json(auth)}}(this));return auth.start()};_Class.prototype._json=function(auth){var args,client;client=new smvp.sdk.ApiClient(auth);args={entry_id:this.args.videoId,types:[this.platform]};return client.api("entries.json",args,function(_this){return function(result){var posterUrl,rendition,renditions,thumbnails,videoUrl;renditions=result.entries[0].renditions;rendition=_this._findLowestRendition(renditions);videoUrl=rendition["urls"][_this.format]["url"];thumbnails=result.entries[0].thumbnails;posterUrl=thumbnails[thumbnails.length-1].url;return _this._buildVideoTag(videoUrl,posterUrl)}}(this))};_Class.prototype._buildVideoTag=function(url,poster){var video;video=document.createElement("video");video.width=this.html5_width;video.height=this.html5_height;video.src=url;video.poster=poster;video.controls="controls";this.container.style.position="relative";this._build_track(video);return this.container.appendChild(video)};_Class.prototype._findLowestRendition=function(renditions){var lowest,lowestKbps,r,_i,_len;lowest=null;lowestKbps=1e6;for(_i=0,_len=renditions.length;_i<_len;_i++){r=renditions[_i];if(r.kbps<lowestKbps){lowest=r;lowestKbps=r.kbps}}return lowest};_Class.prototype._build_track=function(video){var last_progress,track_url;track_url="http://analytics.video.capitalcloud.net/";last_progress=-1;video.addEventListener("loadstart",function(_this){return function(){var request;request=new XMLHttpRequest;request.open("GET",track_url+"pl?publisher_id="+_this.args.publisherId+"&entry_id="+_this.args.videoId);return request.send()}}(this));video.addEventListener("progress",function(_this){return function(){var progress,request;progress=Math.floor(10*video.currentTime/video.duration);if(_this.last_progress!==progress){if(progress<10){request=new XMLHttpRequest;request.open("GET",track_url+"vs?publisher_id="+_this.args.publisherId+"&entry_id="+_this.args.videoId+"&progress="+progress*10);request.send()}return _this.last_progress=progress}}}(this));return video.addEventListener("ended",function(_this){return function(){var request;request=new XMLHttpRequest;request.open("GET",track_url+"vs?publisher_id="+_this.args.publisherId+"&entry_id="+_this.args.videoId+"&progress=100");return request.send()}}(this))};return _Class}(smvp.players.Player)}if(smvp.players.AndroidPlayer==null){smvp.players.AndroidPlayer=function(_super){__extends(_Class,_super);function _Class(){return _Class.__super__.constructor.apply(this,arguments)}_Class.prototype.platform="ANDROID";_Class.prototype.format="mp4";return _Class}(smvp.players.Html5Player)}if(smvp.players.IosPlayer==null){smvp.players.IosPlayer=function(_super){__extends(_Class,_super);function _Class(){return _Class.__super__.constructor.apply(this,arguments)}_Class.prototype.platform="IOS";_Class.prototype.format="m3u8";return _Class}(smvp.players.Html5Player)}if((_ref=smvp.util.browsers.platform)==="android"||_ref==="ios"){smvp.players.scan()}}).call(this);
